<!DOCTYPE html>
<html>
<head>
  <title>Historique des Transactions</title>
  <style>
    /* Style global pour la page */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    /* Conteneur central pour tout le contenu */
    .container {
      max-width: 900px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    /* Titre principal */
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #444;
    }
    /* Styles des titres de chaque transaction */
    h2 {
      background-color: #007BFF;
      color: #fff;
      padding: 10px;
      border-radius: 4px;
      margin: 20px 0;
    }
    /* Style global des table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    /* Style des cellules */
    th, td {
      padding: 12px 15px;
      text-align: left;
      border: 1px solid #ddd;
    }
    /* En-tête de table */
    th {
      background-color: #007BFF;
      color: #fff;
    }
    /* Couleur de fond pour les lignes paires */
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    /* Effet au survol d'une ligne */
    tr:hover {
      background-color: #f1f1f1;
    }
    /* Style du lien de retour */
    .back {
      display: inline-block;
      padding: 10px 20px;
      background-color: #007BFF;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    .back:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Historique des Transactions</h1>
    {% if ventes %}
      {% for vente in ventes %}
        <h2>Vente n°{{ vente.id }} - {{ vente.date|date:"d/m/Y H:i" }}</h2>
        <table>
          <thead>
            <tr>
              <th>Produit</th>
              <th>Quantité</th>
              <th>Prix Unitaire</th>
            </tr>
          </thead>
          <tbody>
            {% for ligne in vente.lignes.all %}
              <tr>
                <td>{{ ligne.produit.nom }}</td>
                <td>{{ ligne.quantite }}</td>
                <td>{{ ligne.prix_unitaire }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endfor %}
    {% else %}
      <p>Aucune transaction enregistrée.</p>
    {% endif %}
    <p><a href="{% url 'menu_caisse' magasin.id %}" class="back">← Retour au menu de la caisse</a></p>
  </div>
</body>
</html>